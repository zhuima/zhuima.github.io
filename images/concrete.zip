<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="zh-CN">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Moorekang&#039;s Blog</title>

<link rel="stylesheet" href="http://www.moorekang.com/wp-content/themes/white-as-milk/style.css" type="text/css" media="screen" />

<link rel="alternate" type="application/rss+xml" title="肥康 RSS Feed" href="http://feed.feedsky.com/moorekang" />
<link rel="alternate" type="text/xml" title="RSS .92" href="http://feed.feedsky.com/moorekang" />
<link rel="pingback" href="http://www.moorekang.com/xmlrpc.php" />

<link rel="Bookmark"   href="http://www.moorekang.com/wp-content/themes/white-as-milk/images/favicon.ico"><!--收藏夹中的图标-->
<link rel="shortcut icon" href="http://www.moorekang.com/wp-content/themes/white-as-milk/images/favicon.ico" ><!--地址栏前面的图标-->
<link rel="icon" href="http://www.moorekang.com/wp-content/themes/white-as-milk/images/favicon.gif" type="image/gif" ><!--动态Icon图标，仅支持Firefox！-->

<link rel='stylesheet' id='mediaelementjs-styles-css'  href='http://www.moorekang.com/wp-content/plugins/media-element-html5-video-and-audio-player/mediaelement/mediaelementplayer.css?ver=3.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='subscribe_me-css'  href='http://www.moorekang.com/wp-content/plugins/sem-subscribe-me/css/styles.css?ver=20090903' type='text/css' media='all' />
<link rel='stylesheet' id='dynamic-to-top-css'  href='http://www.moorekang.com/wp-content/plugins/dynamic-to-top/css/dynamic-to-top-css.php?ver=3.1.6' type='text/css' media='all' />
<script type='text/javascript' src='http://www.moorekang.com/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://www.moorekang.com/wp-includes/js/jquery/jquery.js?ver=1.6.1'></script>
<script type='text/javascript' src='http://www.moorekang.com/wp-content/plugins/media-element-html5-video-and-audio-player/mediaelement/mediaelement-and-player.min.js?ver=2.1.3'></script>
<script type='text/javascript' src='http://www.moorekang.com/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.moorekang.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.moorekang.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='肥康' href='http://www.moorekang.com' />
<meta name="generator" content="WordPress 3.2.1" />

<!-- All in One SEO Pack 1.6.13.4 by Michael Torbert of Semper Fi Web Design[303,318] -->
<meta name="description" content="肥康的博客 算法 Linux 程序设计" />
<meta name="keywords" content="算法，Linux ，程序设计" />
<link rel="canonical" href="http://www.moorekang.com/" />
<!-- /all in one seo pack -->
<script type="text/javascript" src="http://www.moorekang.com/wp-content/plugins/audio-player/assets/audio-player.js?ver=2.0.4.1"></script>
<script type="text/javascript">AudioPlayer.setup("http://www.moorekang.com/wp-content/plugins/audio-player/assets/player.swf?ver=2.0.4.1", {width:"290",animation:"yes",encode:"yes",initialvolume:"60",remaining:"no",noinfo:"no",buffer:"5",checkpolicy:"no",rtl:"no",bg:"E5E5E5",text:"333333",leftbg:"CCCCCC",lefticon:"333333",volslider:"666666",voltrack:"FFFFFF",rightbg:"B4B4B4",rightbghover:"999999",righticon:"333333",righticonhover:"FFFFFF",track:"FFFFFF",loader:"009900",border:"CCCCCC",tracker:"DDDDDD",skip:"666666",pagebg:"FFFFFF",transparentpagebg:"yes"});</script>

<link rel="stylesheet" href="http://www.moorekang.com/wp-content/plugins/auto-highslide/highslide/highslide.css" type="text/css" />
<script type="text/javascript" src="http://www.moorekang.com/wp-content/plugins/auto-highslide/highslide/highslide-with-html.packed.js"></script>
<script type="text/javascript">
	hs.graphicsDir = "http://www.moorekang.com/wp-content/plugins/auto-highslide/highslide/graphics/";
	hs.outlineType = "rounded-white";
	hs.outlineWhileAnimating = true;
	hs.showCredits = false;
</script>
	
<style type="text/css">.navigation{display: none;}</style>
<link rel="stylesheet" type="text/css" media="all" href="http://www.moorekang.com/wp-content/plugins/qq-weibo-plugin-for-wordpress/weibo.css" />
<link rel="stylesheet" href="http://www.moorekang.com/wp-content/plugins/wp-rc-reply-ajax/css/wp-rc-reply.css" type="text/css" media="screen" /><script type="text/javascript" src="http://www.moorekang.com/wp-content/plugins/wp-rc-reply-ajax/js/wp-rc-reply-min.js"></script><!-- wp thread comment 1.4.9.4.002 -->
<style type="text/css" media="screen">
.editComment, .editableComment, .textComment{
	display: inline;
}
.comment-childs{
	border: 1px solid #999;
	margin: 5px 2px 2px 4px;
	padding: 4px 2px 2px 4px;
	background-color: white;
}
.chalt{
	background-color: #E2E2E2;
}
#newcomment{
	border:1px dashed #777;width:90%;
}
#newcommentsubmit{
	color:red;
}
.adminreplycomment{
	border:1px dashed #777;
	width:99%;
	margin:4px;
	padding:4px;
}
.mvccls{
	color: #999;
}
			
</style>
<!-- Google Analytics Tracking by Google Analyticator 6.2: http://ronaldheft.com/code/analyticator/ -->
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-18927630-1']);
	_gaq.push(['_trackPageview']);
	_gaq.push(['_trackPageLoadTime']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>
<body>
<div id="page">

<div id="header">
	<div id="headerimg">
		<h1><a href="http://www.moorekang.com/">肥康</a></h1>
		<div class="description"><h2>憩于理性 行于热情</h2></div>
	</div>
</div>
<hr />

	<div id="content" class="narrowcolumn">

	
		
			<div class="post" id="post-822">
				<h2><a href="http://www.moorekang.com/2012/04/11/find-duplicated-cycle-detection.html" rel="bookmark" title="Permanent Link to Find duplicated Number and Cycle detection">Find duplicated Number and Cycle detection</a></h2>
				<small>四月 11th, 2012 <!-- by moorekang --></small>

				<div class="entry">
					<p>一个有趣的问题，据说这个题目耗费了Don Knuth 24小时解决。一起来看看。</p>
<pre class="example"># "You are given an array of integers of length n, where each element ranges
#  from 0 to n - 2, inclusive.  Prove that at least one  duplicate element must
#  exist, and give an O(n)-time, O(1)-space algorithm for finding some
#  duplicated element.  You must not modify the array elements during this
#  process."</pre>
<p>这有几个重要的约束，O(n)，O(1)的复杂度，不能修改这个数组。可能有多个数重复了，但至少有一个数重复了。</p>
<p>首先第一个证明问题，等价于n个鸽子，n-1个笼子，那么至少有一个笼子里面有2个鸽子，就是鸽笼原理(抽屉原理), 反证法可以证明。</p>
<p>难的是第二个问题，假设a[0, n], 值都在0,1, &#8230;, n-2 范围内。如果扫描这个数组，重复的会出现第二次(废话,囧)，<br />
关键是只能用O(1)的空间，否则用空间记录出现过的就行了。如果把数组看成一个映射，i -&gt; f(i) = a[i]， 那么这个问题可以转换成更抽象的模型。 举个例子：</p>
<pre class="example">n = 6
index: 0 1 2 3 4 5
value: 1 4 0 0 3 2</pre>
<p>其index对应value映射为为0-&gt;1, 1-&gt;4, 2-&gt;0等等，那么把这个图画出来就是这样：</p>
<p><a href="http://moorekang.com/wp-content/uploads/2012/04/cycle3.png" class="highslide-image" onclick="return hs.expand(this);"><img class="aligncenter size-full wp-image-844" title="cycle" src="http://moorekang.com/wp-content/uploads/2012/04/cycle3.png" alt="" width="275" height="259" /></a></p>
<p>&nbsp;</p>
<p>这个问题转换为求图中环开始的点，因为出现环说明某个点重复出现了。从5开始遍历这个图会在0处发现环，为什么选取5，因为5肯定为一个起点，并且不在0~N-2内。其实只要选取不孤立的那个点当作起点就可以检测环，极端情况比如：</p>
<pre>n = 6
index: 0 1 2 3 4 5
value: 0 1 2 3 4 4</pre>
<p>选择index=5还是可以发现环，如果选取0就发现不了4和5之间的那个环。</p>
<p>[Cycle detection]是一个经典的计算机问题。经典的算法是Floyd&#8217;s cycle-finding algorithm，这个算法简单而优美。严格的数学证明当然可以，也能更明显的从现实经验得出结论。如果一个赛道中间出现某个环(分两种情况，赛道本身是环、赛道前面有一段没环而中间出现一个环9字形)，求这个环的周长C。让两位运动员同时出发，并且P1的速度是P2的两倍，当他们第一重新相遇的时候，一定是在环的某个点上，并且其路程之差为这个环的周长的K倍(K&gt;=1)，这解决了一部分问题，我们知道了KC的值，如果K==1，则得出结果，说明两人刚好是在环开始点相遇。否则就是在环内其余点相遇，可以得知现在P2的路程为KC(P1的路程为2KC), 如果让P3以和P2同样的速度从起点开始，P2继续从相遇点开始跑，那么P2和P3肯定还会相遇，并且相遇的点一定为环开始点! 回到这个问题，这个index的值就是重复的值。代码描述如下：</p>
<pre class="src"><span style="color: #ff7f50;">int</span> <span style="color: #4186be;">detectCycle</span>(<span style="color: #ff7f50;">int</span>* <span style="color: #4186be; font-weight: bold;">seq， int Num)</span>
{
    <span style="color: #ff7f50;">int</span> <span style="color: #4186be; font-weight: bold;">slow</span> = Num -1;
    <span style="color: #ff7f50;">int</span> <span style="color: #4186be; font-weight: bold;">fast</span> = Num -1;
    <span style="color: #00ffff;">while</span>(1) {
        slow = seq[slow];
        fast = seq[seq[fast]];
        <span style="color: #00ffff;">if</span>(slow == fast)
            <span style="color: #00ffff;">break</span>;
    }
    <span style="color: #ff7f50;">int</span> <span style="color: #4186be; font-weight: bold;">finder</span> = Num - 1;
    <span style="color: #00ffff;">while</span>(1) {
        slow = seq[slow];
        finder = seq[finder];
        <span style="color: #00ffff;">if</span>(slow == finder)
            <span style="color: #00ffff;">break</span>;
    }
    <span style="color: #00ffff;">return</span> finder;
}</pre>
<p>算法描述很简单，但其中思维的却很有乐趣。以前同样有一个问题，检测一个链表是否有环，这是由此出来的一个特例，因为对于一个链表的每个节点除了头节点都有一个前节点和后节点(无环则末节点指向空)，而图是一个更通用的模型。</p>
<pre class="src">
<span style="color: #ff7f50;">int</span> <span style="color: #4186be;">list_has_cycle</span>(<span style="color: #ff7f50;">NODE</span> *<span style="color: #4186be; font-weight: bold;">list</span>)
{
    <span style="color: #ff7f50;">NODE</span> *<span style="color: #4186be; font-weight: bold;">fast</span>=list;
    <span style="color: #00ffff;">while</span>(1) {
        <span style="color: #00ffff;">if</span>(!(fast=fast-&gt;next)) <span style="color: #00ffff;">return</span> 0;
        <span style="color: #00ffff;">if</span>(fast==list) <span style="color: #00ffff;">return</span> 1;
        <span style="color: #00ffff;">if</span>(!(fast=fast-&gt;next)) <span style="color: #00ffff;">return</span> 0;
        <span style="color: #00ffff;">if</span>(fast==list) <span style="color: #00ffff;">return</span> 1;
        list=list-&gt;next;
    }
    <span style="color: #00ffff;">return</span> 0;
}
</pre>
				</div>

				<p class="postmetadata">Posted in <a href="http://www.moorekang.com/category/programming" title="查看 Programming 中的全部文章" rel="category tag">Programming</a> | Tags: <a href="http://www.moorekang.com/tag/algorithms" rel="tag">Algorithms</a>&nbsp;|    <a href="http://www.moorekang.com/2012/04/11/find-duplicated-cycle-detection.html#respond" title="《Find duplicated Number and Cycle detection》上的评论">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-814">
				<h2><a href="http://www.moorekang.com/2012/03/08/eproject_el.html" rel="bookmark" title="Permanent Link to eproject.el为Emacs加上工程">eproject.el为Emacs加上工程</a></h2>
				<small>三月 8th, 2012 <!-- by moorekang --></small>

				<div class="entry">
					<p>我之前一直用的是project-mode.el来管理项目，在碰上代码很多的工程时还是有点不方便，源文件太多速度有点慢。快速检索文件还是可以，需要指定代码目录，可以增加目录。工程的概念还是不太直观，主要用来快速查找文件。 以前看有同学推荐过eproject, 当时没仔细看。这会儿想自己写一个，而今天偶尔试用了一下这个<a href="http://www.emacswiki.org/emacs/eproject">eproject.el</a>, 这才是真正需要的好东西啊。</p>
<p>一个工程包含的是经常需要访问的文件，另一个重要的地方是可以自己绑定Make, clean, run, configure等命令。 一组常用命令加文件检索，非常方便。看下面的配置文件很清楚，make绑定到了一组命令。</p>
<p>(setq prj-tools<br />
      &#8216;((“Make” “cd ~/source/Panda/; ./run.sh -c;” “f9&#8243;)<br />
	(“Clean” “cd ~/source/Panda/; ./run.sh -x;” “C-f9&#8243;)<br />
	(“Run” “cd ~/source/Panda/; bochs;” “f8&#8243;)<br />
	(“Stop” “-e eproject-killtool” “C-f8&#8243;)<br />
	(“Configure” “./configure” nil）<br />
	(“Explore Project” “nautilus &#8211;browser `pwd` &#038;” nil)<br />
	(“XTerm In Project” “xterm &#038;” nil)))</p>
<p>另外再推荐一个扩展<a href="http://www.emacswiki.org/emacs/viewer.el">viewer.el</a>， 这个可以模拟vi里面的快捷键，其实我不是觉得vi的快捷键好，而是vi分为几个模式，编辑模式、浏览模式。这对emacs有些用，因为往往我打开一个文件只是看看，编辑的时候少，有时候按错了键使得文件内容不经意就改变了。所以通过这个扩展，默认打开一个文件都是浏览模式，还可以设置和vi一样的移动光标的快捷键，当需要进行编辑操作的时候按下i键进入编辑模式。状态栏可以显示当前所处的模式。</p>
<p>(add-hook &#8216;find-file-hook &#8216;view-exist-file)<br />
(global-set-key (kbd “C-o”) &#8216;view-mode)</p>
				</div>

				<p class="postmetadata">Posted in <a href="http://www.moorekang.com/category/think" title="查看 Life|Notes 中的全部文章" rel="category tag">Life|Notes</a> |    <a href="http://www.moorekang.com/2012/03/08/eproject_el.html#respond" title="《eproject.el为Emacs加上工程》上的评论">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-805">
				<h2><a href="http://www.moorekang.com/2011/12/22/%e7%bb%b4%e6%9d%83%e6%8c%87%e5%8d%97.html" rel="bookmark" title="Permanent Link to 维权指南">维权指南</a></h2>
				<small>十二月 22nd, 2011 <!-- by moorekang --></small>

				<div class="entry">
					<p><a href="http://moorekang.com/wp-content/uploads/2011/12/wei.jpg" class="highslide-image" onclick="return hs.expand(this);"><img class="aligncenter size-full wp-image-806" title="维权指南" src="http://moorekang.com/wp-content/uploads/2011/12/wei.jpg" alt="" width="648" height="583" /></a></p>
<p>&nbsp;<br />
<a href="http://luoyonghao.blog.163.com/blog/static/528966392011112042456945/" target="_blank">我为什么一直没找消协和质检部门？&#8212;- 解决西门子冰箱门问题的“正当途径”</a>，这得要多曲折啊，悲哀。</p>
				</div>

				<p class="postmetadata">Posted in <a href="http://www.moorekang.com/category/zheteng" title="查看 Backup 中的全部文章" rel="category tag">Backup</a> |    <a href="http://www.moorekang.com/2011/12/22/%e7%bb%b4%e6%9d%83%e6%8c%87%e5%8d%97.html#respond" title="《维权指南》上的评论">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-796">
				<h2><a href="http://www.moorekang.com/2011/12/22/%e5%af%92%e5%86%b7%e7%9a%84%e7%9d%a1%e4%b8%8d%e7%9d%80%e7%9a%84%e6%97%a9%e6%99%a8%e7%9a%84%e6%9d%82%e6%84%9f.html" rel="bookmark" title="Permanent Link to 寒冷的睡不着的早晨的杂感">寒冷的睡不着的早晨的杂感</a></h2>
				<small>十二月 22nd, 2011 <!-- by moorekang --></small>

				<div class="entry">
					<p>标题要长！</p>
<p>平常都睡到9点多才起床，今天早上3点多居然醒了，然后一直睡不着，起来随便写写。上海的冬天非常冷，还有一点点不适应，买了个电热毯。</p>
<p>刚才一直在想一个事情，在我毕业的时候给一个大学同学介绍了个工作，然后他就辞职去了那。昨天打电话和他聊了一段时间，感觉那边的情况不如预期，公司很多人都渐渐离去。这样心里就有些惭愧，当然我知道并不是我使得他辞职的，他那段时间正好想离职另外换工作。惭愧的原因在于我在这过程中至少当了个”说客”，帮那边公司说了一些好话，因为两边都是熟人，所以这完全不是出于利益目的。同学人很好，也没对我抱怨或者其他不满心情，这更加深了我的内疚感。这算是一个教训吧，永远不要站在自己的立场试图去影响别人的选择。公司招人也是一样的道理，不要对自己公司进行浮夸或者其他的不客观的形容，如果招来的人做得不开心这对两方都是损失。现在回想一下，我当时充当中间人也是受了那边公司的蛊惑，用蛊惑这个词因为当时我完全相信了对方。</p>
<p>再说说关于工作的感想，我觉得对于码农来说我们都还算是幸运，我所接触的一些码农，大部分还是对此是感兴趣的。做一件感兴趣而能养活自己的事情确实应该算幸运。这也正好是上次年纪比较大的同事吃饭的时候他一直说的”被老婆说，你啊lucky而已”。有时候会觉得老员工比我有激情了，这实在不好，改之。很多事情，开始觉得没什么意思，那是因为没做进去，做进去自然会有好玩的地方。码农有一个比较通用的惯例，看别人写的东西都觉得不那么顺心，所以要造自己的轮子并欣赏自己的轮子。这也能看出写代码和写文字的另外一点共同之处，应该有一点精神追求在里面，即使你做的东西要对着钱的。据说今年的毕业生非常好找工作，基本被抢了，另外一些经常听到的声音就是泡沫要来了。现在不少毕业生也不想出来到公司做，很多会倾向于进事业单位和研究所，相类似公务员考试成为国考，大家都往体制内挤啊。我在实验室的时候，那段时间《窝居》真他妈火啊，瞅瞅悲催的C++程序员小贝同志，我后面那排师弟师妹们就吼着要进体制内。果然，还是蛮快的。</p>
<p>睡觉之前看了看下厨房这个网站，作为豆瓣忠实用户，在这网站刚刚上线就上去观望了。当时觉得没那么有吸引力，不过现在可能用户多了，而且自己也想周末学学做饭，所以对这有好感。豆瓣系的小清新风格。创建人有这么句话:”下厨房是有关于理想，而不是一桩生意。理想这种形而上的东西，会让我觉得，就算是倒闭，也要有尊严地倒下去。我们期望赋予下厨房一些家庭生活理念，不会触及外出就餐的需求，甚至广告&#8230;”。那篇报道算是软文也好，这句话还是蛮认同的。这让人联想到老罗的创业理念啊，不管泡沫与否，互联网已经不是那么有技术门槛的行业了，办个网站这样的事情很多人能做。怎样让一个网站和其他的网站看起不一样？对于年轻的用户，有价值观输出的网站有吸引力，比如豆瓣，如果没有豆瓣”文艺”这个词应该这时候没这么流行。即使有时候豆瓣的一些改版让用户不满意，但大部分还是会留在上面，有价值观输出的网站会引导你。回想我之前待过的互联网公司(房产相关网站)，上线一段时间大家还信心满满的，大家每做一些相对于同类网站的小改进都会激动，心里回想”你看他们的结果没我们的好，我们的信息更有价值”，诸如此类。后来就是慢慢推广不开，这是什么原因？有人会说啊，这信息有用啊，而且买房的很多人都要在网上搜啊，你看有人就是单纯做了个黄页的网站，就有多大的流量。这正是问题所在，房产网站的用户不是偏年轻的，很多年纪稍微大点的用户都不会去浏览器地址栏输入地址(所以需要黄页)，同样的道理他们不会去用心发现你所呈现的不一样的东西，他们可能更偏好于搜房网那种首页全是链接而且到处这类提供信息的常用网站，不能做到第一、第二完全是白费。</p>
<p>唉，扯完，睡觉。</p>
				</div>

				<p class="postmetadata">Posted in <a href="http://www.moorekang.com/category/think" title="查看 Life|Notes 中的全部文章" rel="category tag">Life|Notes</a> |    <a href="http://www.moorekang.com/2011/12/22/%e5%af%92%e5%86%b7%e7%9a%84%e7%9d%a1%e4%b8%8d%e7%9d%80%e7%9a%84%e6%97%a9%e6%99%a8%e7%9a%84%e6%9d%82%e6%84%9f.html#respond" title="《寒冷的睡不着的早晨的杂感》上的评论">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-793">
				<h2><a href="http://www.moorekang.com/2011/12/21/a-emacs-func.html" rel="bookmark" title="Permanent Link to A Emacs func">A Emacs func</a></h2>
				<small>十二月 21st, 2011 <!-- by moorekang --></small>

				<div class="entry">
					<p>这个操作好像经常要用到，拷贝当前光标连续的一段字符串(除了空白和换行), 写了个小函数来实现。</p>
<pre class="src">
(<span style="color: #00ffff;">defun</span> <span style="color: #87cefa;">get-continue-string</span> ()
  (interactive)
  (skip-chars-backward <span style="color: #ffa07a;">"^ \n"</span>)
  (setq low (point))
  (skip-chars-forward <span style="color: #ffa07a;">"^ \n"</span>)
  (setq high (point))
  (copy-region-as-kill low high)
  (message (buffer-substring low high)))

(global-set-key (kbd <span style="color: #ffa07a;">"C-x y"</span>) 'get-continue-string)</pre>
				</div>

				<p class="postmetadata">Posted in <a href="http://www.moorekang.com/category/programming" title="查看 Programming 中的全部文章" rel="category tag">Programming</a> | Tags: <a href="http://www.moorekang.com/tag/emacs" rel="tag">Emacs</a>&nbsp;|    <a href="http://www.moorekang.com/2011/12/21/a-emacs-func.html#respond" title="《A Emacs func》上的评论">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-704">
				<h2><a href="http://www.moorekang.com/2011/10/20/basketball.html" rel="bookmark" title="Permanent Link to A Basket-Ball Demo">A Basket-Ball Demo</a></h2>
				<small>十月 20th, 2011 <!-- by moorekang --></small>

				<div class="entry">
					<p>最近闲暇时间用C++写了个小Demo，一个小小的篮球模拟。在学校的时候看过《人工智能编程精粹》，里面有个足球模拟，看起来还比较逼真。我这个篮球模拟是比较类似的，主要好玩的地方是在于状态机。图形方面做得很简单，还是用OpenGL来实现的，另外用了一个库glui，这个东西很好，把GUI方面琐碎的事情就简化了。整个效果图如下，这可是湖人对火箭噢。</p>
<p><a href="http://moorekang.com/wp-content/uploads/2011/10/2011-10-20-010256_1306x730_scrot.png" class="highslide-image" onclick="return hs.expand(this);"><img src="http://moorekang.com/wp-content/uploads/2011/10/2011-10-20-010256_1306x730_scrot.png" alt="" title="BasketBall" width="780" height="438" class="aligncenter size-full wp-image-717" /></a></p>
<p>调试状态机是个很有趣的过程，每一个球队有自己的状态机，分为进攻状态、防守状态、准备发球状态，每个球员也有自己的状态机，如下图所示。这里使用的是状态模式，把复杂的转移逻辑分散到各个状态节点，这正是状态模式的精华啊。现在这个还只是个粗糙的版本，虽然看得出来有那么点意思，规则都出来了，但是每个球员的跑位不逼真，没有多少智能的感觉。当篮球碰到边界的时候自动反弹，这点有点假，不过这也简化了不少比较繁琐的捡球和发球动作。当然现在的规则都比较简单，连三分和两分都没有分出来，罚球也没有，哈哈。现在的状态机看起来大部分时间还可以，很少的时候会出现一些比较反常规的现象。把每个状态转移过程在画面中显示出来能比较直观的去调试。</p>
<p>下面这个是球员的状态转移图，也就是FieldPlayerStates.cpp实现的。球队的状态机要简单一些，只有三个。</p>
<p><a href="http://moorekang.com/wp-content/uploads/2011/10/statemachine.png" class="highslide-image" onclick="return hs.expand(this);"><img class="aligncenter size-large wp-image-706" title="statemachine" src="http://moorekang.com/wp-content/uploads/2011/10/statemachine-1024x268.png" alt="" width="768" height="200" /></a></p>
<p>程序在这里<a href="https://github.com/chenyukang/Basketball_demo">GitHub:BasketBall</a>，感兴趣的可以看一下，也有7000行的代码了，也有点乱:). 后面有时间再调试一下，慢慢细化，球员的站位和防守动作做到更智能些。</p>
				</div>

				<p class="postmetadata">Posted in <a href="http://www.moorekang.com/category/programming" title="查看 Programming 中的全部文章" rel="category tag">Programming</a> | Tags: <a href="http://www.moorekang.com/tag/c" rel="tag">C</a>, <a href="http://www.moorekang.com/tag/game" rel="tag">Game</a>&nbsp;|    <a href="http://www.moorekang.com/2011/10/20/basketball.html#comments" title="《A Basket-Ball Demo》上的评论">8 Comments &#187;</a></p>
			</div>

		<!-- pb259 --><div class="pagebar">Pages:&nbsp;<span class="this-page">1</span>
<a href="http://www.moorekang.com/page/2" title="Page 2">2</a>
<a href="http://www.moorekang.com/page/3" title="Page 3">3</a>
<a href="http://www.moorekang.com/page/4" title="Page 4">4</a>
<a href="http://www.moorekang.com/page/5" title="Page 5">5</a>
<a href="http://www.moorekang.com/page/6" title="Page 6">6</a>
<a href="http://www.moorekang.com/page/7" title="Page 7">7</a>
<a href="http://www.moorekang.com/page/8" title="Page 8">8</a>
<a href="http://www.moorekang.com/page/9" title="Page 9">9</a>
<a href="http://www.moorekang.com/page/10" title="Page 10">10</a>
<a href="http://www.moorekang.com/page/2" title="Page 2">Next</a>
</div>
		<div class="navigation">
			<div class="alignleft"><a href="http://www.moorekang.com/page/2" >&laquo; Older Entries</a></div>
			<div class="alignright"></div>
		</div>

	
	</div>

<div id="sidebar">

<a title="订阅RSS" rel="nofollow" href="http://feed.feedsky.com/moorekang" target="_blank">
<img src=http://www.moorekang.com/wp-content/themes/white-as-milk/images/share/rssfeed.jpg alt="订阅RSS" /></a>
<a title="订阅到Google" rel="nofollow" href="http://www.google.com/ig/add?feedurl=http://feed.feedsky.com/moorekang" target="_blank">
<img src=http://www.moorekang.com/wp-content/themes/white-as-milk/images/share/google.gif alt="订阅到Google" /></a>
<a title="订阅到鲜果" rel="nofollow" href="http://www.xianguo.com/subscribe.php?url=http://feed.feedsky.com/moorekang" target="_blank">
<img src=http://www.moorekang.com/wp-content/themes/white-as-milk/images/share/xianguo.gif alt="订阅到鲜果" /></a>
<a title="订阅到QQ" rel="nofollow" href="http://mail.qq.com/cgi-bin/feed?u=http://feed.feedsky.com/moorekang" target="_blank">
<img src=http://www.moorekang.com/wp-content/themes/white-as-milk/images/share/qq.gif alt="订阅到QQ" /></a>
<a title="邮件订阅" rel="nofollow" href="http://www.feedsky.com/msub_wr.html?burl=moorekang" target="_blank">
<img src=http://www.moorekang.com/wp-content/themes/white-as-milk/images/share/email-dy.gif alt="邮件订阅" /></a>

		<ul>
			<li id="pages-2" class="widget widget_pages"><h2 class="widgettitle">页面</h2>		<ul>
			<li class="page_item page-item-2"><a href="http://www.moorekang.com/about" title="关于">关于</a></li>
<li class="page_item page-item-332"><a href="http://www.moorekang.com/%e5%9c%b0%e5%9b%be" title="地图">地图</a></li>
<li class="page_item page-item-459"><a href="http://www.moorekang.com/%e6%a0%87%e7%ad%be" title="标签">标签</a></li>
		</ul>
		</li><li id="simpletags-3" class="widget widget-simpletags"><h2 class="widgettitle">标签</h2>
<!-- Generated by Simple Tags 2.1.1 - http://wordpress.org/extend/plugins/simple-tags -->
	<div class="st-tag-cloud">
	<a href="http://www.moorekang.com/tag/%e7%ae%97%e6%b3%95" id="tag-link-26" class="st-tags t4" title="3 topics" rel="tag" style="font-size:12.67pt; color:#3e8688;">算法</a>
<a href="http://www.moorekang.com/tag/sicp" id="tag-link-16" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">SICP</a>
<a href="http://www.moorekang.com/tag/memcached" id="tag-link-56" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">memcached</a>
<a href="http://www.moorekang.com/tag/lisp" id="tag-link-39" class="st-tags t2" title="2 topics" rel="tag" style="font-size:10.22pt; color:#1496b5;">Lisp</a>
<a href="http://www.moorekang.com/tag/%e4%bb%a3%e7%a0%81%e4%bc%98%e5%8c%96" id="tag-link-21" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">代码优化</a>
<a href="http://www.moorekang.com/tag/scheme" id="tag-link-10" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">scheme</a>
<a href="http://www.moorekang.com/tag/%e6%89%be%e5%b7%a5%e4%bd%9c" id="tag-link-29" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">找工作</a>
<a href="http://www.moorekang.com/tag/c" id="tag-link-12" class="st-tags t10" title="7 topics" rel="tag" style="font-size:20pt; color:#bb5500;">C</a>
<a href="http://www.moorekang.com/tag/think" id="tag-link-3" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">Life|Notes</a>
<a href="http://www.moorekang.com/tag/macors" id="tag-link-5" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">macors</a>
<a href="http://www.moorekang.com/tag/%e4%b8%8d%e6%8a%b1%e6%80%a8" id="tag-link-25" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">不抱怨</a>
<a href="http://www.moorekang.com/tag/%e8%b7%af%e5%be%84%e6%90%9c%e7%b4%a2" id="tag-link-15" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">路径搜索</a>
<a href="http://www.moorekang.com/tag/%e5%b9%b6%e6%9f%a5%e9%9b%86-%e8%bf%b7%e5%ae%ab" id="tag-link-14" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">并查集 迷宫</a>
<a href="http://www.moorekang.com/tag/c%e8%af%ad%e8%a8%80" id="tag-link-9" class="st-tags t5" title="4 topics" rel="tag" style="font-size:13.89pt; color:#537e71;">C语言</a>
<a href="http://www.moorekang.com/tag/makefile" id="tag-link-23" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">makefile</a>
<a href="http://www.moorekang.com/tag/%e6%b8%b8%e6%88%8f" id="tag-link-8" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">游戏</a>
<a href="http://www.moorekang.com/tag/linux" id="tag-link-22" class="st-tags t7" title="5 topics" rel="tag" style="font-size:16.33pt; color:#7c6d43;">Linux</a>
<a href="http://www.moorekang.com/tag/nba" id="tag-link-20" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">NBA</a>
<a href="http://www.moorekang.com/tag/emacs" id="tag-link-6" class="st-tags t5" title="4 topics" rel="tag" style="font-size:13.89pt; color:#537e71;">Emacs</a>
<a href="http://www.moorekang.com/tag/a-k-shortest" id="tag-link-18" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">A* k-shortest</a>
<a href="http://www.moorekang.com/tag/%e9%9d%a2%e8%af%95" id="tag-link-24" class="st-tags t5" title="4 topics" rel="tag" style="font-size:13.89pt; color:#537e71;">面试</a>
<a href="http://www.moorekang.com/tag/python" id="tag-link-45" class="st-tags t5" title="4 topics" rel="tag" style="font-size:13.89pt; color:#537e71;">Python</a>
<a href="http://www.moorekang.com/tag/%e7%ac%94%e8%af%95%e9%a2%98" id="tag-link-17" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">笔试题</a>
<a href="http://www.moorekang.com/tag/%e6%89%af%e6%b7%a1" id="tag-link-36" class="st-tags t4" title="3 topics" rel="tag" style="font-size:12.67pt; color:#3e8688;">扯淡</a>
<a href="http://www.moorekang.com/tag/%e6%8a%bd%e8%b1%a1" id="tag-link-11" class="st-tags t1" title="1 topics" rel="tag" style="font-size:9pt; color:#009fcc;">抽象</a></div>

</li><li id="search-5" class="widget widget_search"><form method="get" id="searchform" action="http://www.moorekang.com/">
<label class="hidden" for="s">搜索：</label>
<div><input type="text" value="" name="s" id="s" /><br />
<input type="submit" id="searchsubmit" value="Search" /></div>
</form></li>		<li id="recent-posts-6" class="widget widget_recent_entries">		<h2 class="widgettitle">近期文章</h2>		<ul>
				<li><a href="http://www.moorekang.com/2012/04/11/find-duplicated-cycle-detection.html" title="Find duplicated Number and Cycle detection">Find duplicated Number and Cycle detection</a></li>
				<li><a href="http://www.moorekang.com/2012/03/08/eproject_el.html" title="eproject.el为Emacs加上工程">eproject.el为Emacs加上工程</a></li>
				<li><a href="http://www.moorekang.com/2011/12/22/%e7%bb%b4%e6%9d%83%e6%8c%87%e5%8d%97.html" title="维权指南">维权指南</a></li>
				<li><a href="http://www.moorekang.com/2011/12/22/%e5%af%92%e5%86%b7%e7%9a%84%e7%9d%a1%e4%b8%8d%e7%9d%80%e7%9a%84%e6%97%a9%e6%99%a8%e7%9a%84%e6%9d%82%e6%84%9f.html" title="寒冷的睡不着的早晨的杂感">寒冷的睡不着的早晨的杂感</a></li>
				<li><a href="http://www.moorekang.com/2011/12/21/a-emacs-func.html" title="A Emacs func">A Emacs func</a></li>
				<li><a href="http://www.moorekang.com/2011/10/20/basketball.html" title="A Basket-Ball Demo">A Basket-Ball Demo</a></li>
		<!-- pb259 --><div class="pagebar">Pages:&nbsp;<span class="this-page">1</span>
<a href="http://www.moorekang.com/page/2" title="Page 2">2</a>
<a href="http://www.moorekang.com/page/3" title="Page 3">3</a>
<a href="http://www.moorekang.com/page/4" title="Page 4">4</a>
<a href="http://www.moorekang.com/page/5" title="Page 5">5</a>
<a href="http://www.moorekang.com/page/6" title="Page 6">6</a>
<a href="http://www.moorekang.com/page/7" title="Page 7">7</a>
<a href="http://www.moorekang.com/page/8" title="Page 8">8</a>
<a href="http://www.moorekang.com/page/9" title="Page 9">9</a>
<a href="http://www.moorekang.com/page/10" title="Page 10">10</a>
<a href="http://www.moorekang.com/page/2" title="Page 2">Next</a>
</div>		</ul>
		</li><li id="categories-3" class="widget widget_categories"><h2 class="widgettitle">分类目录</h2>		<ul>
	<li class="cat-item cat-item-4"><a href="http://www.moorekang.com/category/zheteng" title="查看 Backup 下的所有文章">Backup</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://www.moorekang.com/category/books" title="查看 Books 下的所有文章">Books</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://www.moorekang.com/category/think" title="查看 Life|Notes 下的所有文章">Life|Notes</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://www.moorekang.com/category/programming" title="查看 Programming 下的所有文章">Programming</a>
</li>
		</ul>
</li><li id="archives-6" class="widget widget_archive"><h2 class="widgettitle">文章归档</h2>		<select name="archive-dropdown" onchange='document.location.href=this.options[this.selectedIndex].value;'> <option value="">选择月份</option> 	<option value='http://www.moorekang.com/2012/04'> 2012 年四月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2012/03'> 2012 年三月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2011/12'> 2011 年十二月 &nbsp;(3)</option>
	<option value='http://www.moorekang.com/2011/10'> 2011 年十月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2011/09'> 2011 年九月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2011/08'> 2011 年八月 &nbsp;(2)</option>
	<option value='http://www.moorekang.com/2011/07'> 2011 年七月 &nbsp;(4)</option>
	<option value='http://www.moorekang.com/2011/06'> 2011 年六月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2011/05'> 2011 年五月 &nbsp;(3)</option>
	<option value='http://www.moorekang.com/2011/04'> 2011 年四月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2011/03'> 2011 年三月 &nbsp;(4)</option>
	<option value='http://www.moorekang.com/2011/02'> 2011 年二月 &nbsp;(2)</option>
	<option value='http://www.moorekang.com/2011/01'> 2011 年一月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2010/12'> 2010 年十二月 &nbsp;(4)</option>
	<option value='http://www.moorekang.com/2010/11'> 2010 年十一月 &nbsp;(3)</option>
	<option value='http://www.moorekang.com/2010/10'> 2010 年十月 &nbsp;(5)</option>
	<option value='http://www.moorekang.com/2010/09'> 2010 年九月 &nbsp;(1)</option>
	<option value='http://www.moorekang.com/2010/08'> 2010 年八月 &nbsp;(7)</option>
	<option value='http://www.moorekang.com/2010/07'> 2010 年七月 &nbsp;(10)</option>
 </select>
</li><li id="linkcat-2" class="widget widget_links"><h2 class="widgettitle">链接表</h2>
	<ul class='xoxo blogroll'>
<li><a href="http://www.chenhuan.net/" target="_blank">Hexec的博客</a></li>
<li><a href="http://www.wutianqi.com/" target="_blank">Tanky Woo的博客</a></li>
<li><a href="http://www.yqshare.com/" target="_blank">卢玉奇的博客</a></li>
<li><a href="http://blog.sina.com.cn/gusui" target="_blank">欧阳锦林</a></li>
<li><a href="http://wangcong.org/blog/" target="_blank">王聪</a></li>
<li><a href="http://coolshell.cn/" title="很不错的站点">酷壳</a></li>

	</ul>
</li>
<li id="meta-7" class="widget widget_meta"><h2 class="widgettitle">功能</h2>			<ul>
						<li><a href="http://www.moorekang.com/wp-login.php">登录</a></li>
			<li><a href="http://feed.feedsky.com/moorekang" title="使用 RSS 2.0 订阅本站点内容">文章 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://www.moorekang.com/comments/feed" title="使用 RSS 订阅本站点的所有文章的近期评论">评论 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>
						</ul>
</li>		</ul>
	</div>

<script type="text/javascript" src="http://china-addthis.googlecode.com/svn/trunk/addfeed.js" charset="UTF-8"></script><span class="addfeed_cn" style="display:none;"><a href="http://feed.feedsky.com/moorekang" i="1|16|9|3|2|4|6|5|7|8|10|11" side="left" title="订阅我吧"><img src="http://addfeed.cn/images/fs2.gif" alt="分享家:Addfeed" align="absmiddle" /></a></span>







<hr />
<div id="footer" style="text-aligh:center">
<center>
<!-- If you'd like to support WordPress, having the "powered by" link somewhere on your blog is the best way; it's our only promotion or advertising. -->
	<p>
		肥康 is powered by <a href="http://wordpress.org/">WordPress</a> with <a href="http://www.azeemazeez.com/blogs/white-as-milk/" title="White as Milk theme for Wordpress">White as Milk</a>. <br /><a href="http://feed.feedsky.com/moorekang">Entries (RSS)</a> and <a href="http://www.moorekang.com/comments/feed">Comments (RSS)</a>.
		<!-- 23 queries. 0.396 seconds. -->
	</p>
</div>
</center>
</div>
		<script type='text/javascript' src='http://www.moorekang.com/wp-content/plugins/sem-subscribe-me/js/scripts.js?ver=20090906'></script>
<script type='text/javascript' src='http://www.moorekang.com/wp-content/plugins/dynamic-to-top/js/libs/jquery.easing.js?ver=1.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var mv_dynamic_to_top = {
	text: "返回顶部",
	version: "yes",
	min: "200",
	speed: "1000",
	easing: "linear",
	margin: "20"
};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.moorekang.com/wp-content/plugins/dynamic-to-top/js/dynamic.to.top.js?ver=3.1.6'></script>
</body>
</html>
